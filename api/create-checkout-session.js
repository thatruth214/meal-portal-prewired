export default async function handler(req,res){try{const body=typeof req.body==='string'?JSON.parse(req.body||'{}'):(req.body||{});const {plan='basic',term='monthly'}=body;const origin=process.env.SITE_URL||`https://${req.headers.host}`;if(!process.env.STRIPE_SECRET_KEY){return res.status(200).json({url:`${origin}/welcome?session_id=demo`})}const {default:Stripe}=await import('stripe');const stripe=new Stripe(process.env.STRIPE_SECRET_KEY);return res.status(200).json({url:origin+'/welcome?session_id=demo'})}catch(e){return res.status(500).json({error:e.message})}}