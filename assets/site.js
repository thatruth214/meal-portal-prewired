async function startCheckout(plan,term){const res=await fetch('/api/create-checkout-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({plan,term})});const data=await res.json();if(data.url)location=data.url;else alert(data.error||'Unable to start checkout')}document.addEventListener('click',e=>{const btn=e.target.closest('.choose');if(!btn)return;const p=btn.dataset.plan;const s=document.querySelector(`.plan-term[data-plan="${p}"]`);startCheckout(p,s?s.value:'monthly')});