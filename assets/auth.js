async function getToken(){const {data:{session}}=await supa.auth.getSession();return session?.access_token||null}async function requireLogin(){const {data:{session}}=await supa.auth.getSession();if(!session){location.assign('/welcome')}}window.addEventListener('DOMContentLoaded',()=>{const l=document.getElementById('login-btn');const o=document.getElementById('logout-btn');if(l){l.onclick=async()=>{const e=prompt('Enter email');if(!e)return;const p=prompt('Enter password');if(!p)return;const s=await supa.auth.signInWithPassword({email:e,password:p});if(s.error){const u=await supa.auth.signUp({email:e,password:p});if(u.error)return alert(u.error.message)}location.assign('/portal')}}if(o){o.onclick=()=>supa.auth.signOut().then(()=>location.assign('/'))}});window.__auth={getToken,requireLogin}